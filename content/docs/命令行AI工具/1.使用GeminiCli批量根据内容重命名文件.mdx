---
title: 1. 使用 Gemini-CLI 批量根据内容重命名文件
description: 介绍如何使用 Gemini-CLI 批量重命名发票文件，以及相关的 Agent 理论知识。
---

## 用例 1：批量重命名文件

我们在填写报销单的时候需要上传电子发票，现在的电子发票下载后名称很乱，上传时很难知道费用对应的是哪个文件。

比如我用 QQ 邮箱的批量下载发票功能，下载了几个火车票和通讯发票的 PDF，它是这样的：

![QQ邮箱下载的发票PDF](/images/qq_email_invoice.png)

我希望火车票的文件命名为：`日期-出发地-到达地-金额.PDF`，通讯发票的文件命名为：`月份-金额.PDF`。

### 步骤 1：打开终端

首先在该文件夹下打开终端：
*   **Windows**：可以在文件夹空白处右键 -> 在终端打开
*   **Mac**：需要在该文件夹上点击右键，选择服务 -> 打开终端

打开终端后，输入 `gemini` 进入 gemini-cli。

### 步骤 2：执行重命名指令

然后输入：

```text
帮我整理该文件夹下的发票，把火车票的文件命名为：日期(MMdd)-出发地-到达地-金额.PDF，通讯发票的文件命名为：月份-金额.PDF
```

Gemini 在读取和修改文件时，会请求权限，选择第二条 **allow always**。

如果不想一直被请求权限，可在进入 gemini 时输入 `gemini -y`，此时 gemini 会自动选择 allow always，但也意味着 gemini 可以无限制的访问你的文件，需要自行权衡。

在过程中，我发现文件中的乱码对 gemini 也造成了一些困扰，它尝试了不同的方式去读取文件，最终用了 3 分钟才完成。结果如下：

![QQ邮箱下载的发票PDF](/images/gemini_rename_result.png)

### 步骤 3：保存常用指令

为了不每次都输入这条命令，我们可以把它保存到 txt 文件中，如图：

![QQ邮箱下载的发票PDF](/images/gemini_rename.txt.png)

以后我们打开 Gemini，只需要输入：

```bash
执行 发票重命名.txt
```

即可。

![QQ邮箱下载的发票PDF](/images/gemini_execute_txt.png)

### 步骤 4：制作自动化"小程序"

再进一步，我们可以做一个我们自己的小程序，不需要会编程，你只需要打开记事本，输入：

```bat
gemini -y 发票重命名.txt
```

然后另存为 `.bat` 文件，双击运行即可。

![QQ邮箱下载的发票PDF](/images/gemini_rename_bat.png)

## 理论回顾

下面通过回顾操作，讲一下本章涉及的理论知识：

### 1. 为什么要在文件夹里打开终端？
![QQ邮箱下载的发票PDF](/images/gemini_path.png)

因为 gemini 可访问的文件范围取决于你打开终端的文件夹，比如我截图中的 `C:\Users\ldy\Downloads\新建文件夹`。

建议总是在一个可控的文件夹下运行 gemini，避免它操作时影响范围过大，尤其是在你看不懂自己在给它什么权限的时候。

### 2. Gemini 如何做到读取和修改文件？
![QQ邮箱下载的发票PDF](/images/what_is_agent.png)

在我们的案例中，gemini 会执行 DOS 命令获取当前文件夹下的文件列表，它看到后缀是 PDF 后，会调用 PDF 阅读工具打开文件，读取文件内容，然后根据你的要求修改文件名。

AI 命令行工具都集成了很多工具，它们还可能会自动安装工具来完成你的任务。

在这个过程中，Gemini-大模型，相当于**大脑**，它用 DOS 命令、PDF 读取等工具 **Tools** 来组成需要完成任务的**身体**，这种**大脑+身体**的组合，就是 **Agent-智能体**。

### 3. 为什么 bat 文件能直接执行整理发票任务？为什么要加 -y 参数？

Gemini 本身是一个命令行工具，支持很多参数。有兴趣的话，你可以直接问 Gemini 它支持的参数以及它们的作用。

我们通过一行命令 `gemini -y 发票重命名.txt` 就实现了一个“小程序”。

希望这个例子能让你感受到，AI 时代，你距离定制为自己干活的 AI 智能体非常近了！
![QQ邮箱下载的发票PDF](/images/your_custom_agent.png)

<Cards>
  <Card title="上一章：理解并安装 CLI 工具" href="/docs/命令行AI工具/0.理解并安装命令行AI工具" />
</Cards>
